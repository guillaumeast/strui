# ğŸ› ï¸ **`strui` v1.0.0**

Tiny Unicodeâ€‘aware & ANSIâ€‘aware **string CLI** â€“ built on top of [`libstrui`](https://github.com/guillaumeast/libstrui).

[![C++](https://img.shields.io/badge/language-C%2B%2B17-blue)](https://en.cppreference.com/)
[![Type: CLI](https://img.shields.io/badge/type-CLI-lightgrey)](https://en.wikipedia.org/wiki/Command-line_interface)
[![Platform: Unix](https://img.shields.io/badge/platform-Unix-darkgreen)](https://en.wikipedia.org/wiki/Unix)
[![Status: v1.0.0](https://img.shields.io/badge/status-v1.0.0-brightgreen)](https://github.com/guillaumeast/strui/releases/tag/v1.0.0)

> **`strui`** is the commandâ€‘line face of `libstrui`:  
> think of it as a minimal, UTFâ€‘8â€‘smart replacement for `cut`, `wc`, or `tr` that understands emojis and ANSI escapes.

---

## âœ¨ Features

- Everything from **`libstrui`** available at the tips of your fingers:
  - clean ANSI escapes
  - measure *visual* width / height
  - split / join / repeat helpers
  - substring count
- **UTFâ€‘8 aware** (CJK, wide & combined emojis)
- **Zero runtime dependencies** â€“ the binary is **fully self-contained**
- Ships as **one small binary** (`<50â€¯KB`)

---

## ğŸš€ Installation

```bash
# clone + build
git clone https://github.com/guillaumeast/strui.git
cd strui
make install           # clean + build + install to ~/.local/bin
```

Makefile drops the binary in `~/.local/bin/strui` and warns if that path is not in `$PATH`.

> ğŸ§¼ Coming soon: install via `curl | sh` with autoâ€‘compiled or prebuilt binary

---

## ğŸ“¦ Dependencies

- **Runtime:** None
- **Build-time:**
    - [`libunistring`](https://www.gnu.org/software/libunistring/)Â â‰¥Â 1.1 (**statically linked**)
    - Any **C++17** compiler (`g++`, `clang++`, â€¦)

---

## ğŸ–¥ï¸ Usage

| Command                                                | Description                                   |
|--------------------------------------------------------|-----------------------------------------------|
| `strui width <string>`                                 | Return *visual* width (columns) of `string`   |
| `strui height <string>`                                | Return number of *lines* in `string`          |
| `strui clean <string>`                                 | Remove ANSI *escape sequences*                |
| `strui split <string> <separator>`                     | Vectorâ€‘split `string` on `separator`          |
| `strui join ?--separator ?<separator> <...strings...>` | Join `strings` with optional `separator`      |
| `strui repeat <count> <string> ?<separator>`           | Repeat `string` `count` times                 |
| `strui count <value> <string>`                         | Count occurrences of `value` in `string`      |

> `Display width` is measured in `columns`, of `characters` or `strings`, when output to a device that uses `non-proportional fonts`.  
> Note that for some rarely used characters the actual `fonts` or `terminal emulators` can use a different `width`. There is no mechanism for communicating the `display width` of `characters` across a Unix pseudo-terminal (`tty`).  
> Also, there are scripts with complex rendering, like the `Indic` scripts. For these scripts, there is no such concept as `non-proportional fonts`. Therefore the results of these functions usually work fine on most scripts and on most `characters` but can fail to represent the actual `display width`.  
> ğŸ“š See [libunistring documentation â€“ Display width <uniwidth.h>](https://www.gnu.org/software/libunistring/manual/libunistring.html#uniwidth_002eh) for details on how display width is computed.

---

## ğŸ§ª Tests

> Requirement: Docker

Tests are run locally and **inside an Ubuntu container** to guarantee portability.

```bash
make test          # build + tests
```

---

## ğŸ“ Project structure

```
strui/
â”œâ”€â”€ Makefile
â”œâ”€â”€ include/strui.hpp   # libstrui header
â”œâ”€â”€ src/main.cpp        # CLI implementation
â”œâ”€â”€ build/              # autogenerated binary (can be .gitignored)
â””â”€â”€ tests/
 Â Â  â”œâ”€â”€ volume/         # auto-generated at runtime by `run.sh` (can be .gitignored)
 Â Â  â”œâ”€â”€ run.sh          # test orchestrator (POSIX sh)
 Â Â  â”œâ”€â”€ test.sh         # unit tests (POSIX sh)
 Â Â  â””â”€â”€ Dockerfile      # ubuntu image description for portability tests
```

---

## ğŸ‘¤ Author

MadeÂ withÂ â¤ï¸Â by [@guillaumeast](https://github.com/guillaumeast)
